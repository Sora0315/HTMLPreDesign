<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- X-UA-Compatible設置IE兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--RWD-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
    <meta name="author" content="萊茵巴赫科技" />
    <meta name="copyright" content="萊茵巴赫科技" />
    <!-- 結構化資料 SEO 與 meta 標籤 -->
    <meta property="og:title" content="柚美。柚好" />
    <meta property="og:url" content="">
    <meta property="og:image" content="要顯示的縮圖網址" />
    <meta property="og:description" content="網頁描述" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
    <title>柚美。柚好</title>
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/semantic.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="js/reinbachCommon.js"></script>
</head>

<body style="background: none">
    <div class="member-order-detail-fade-in">
        <!--共用樣式區，Header-->
        <header>
            <nav class="nav member-order-detail-menu">
                <img src="images/order-bounce-logo1.png" class="img-fluid bounce-logo" alt="" />
                <a href="index.html" class="order-check-site-logo">
                    <img src="images/webLogo-order-check.png" class="img-fluid" alt="" />
                </a>
                <img src="images/order-bounce-logo2.png" class="img-fluid bounce-logo" alt="" />
            </nav>
        </header>
        <script>
            $('.member-order-detail-menu .order-check-site-logo').hover(
                function() {
                    $(this).parent('.member-order-detail-menu').children('.bounce-logo').toggleClass('rotate360');
                },
                function() {
                    $(this).parent('.member-order-detail-menu').children('.bounce-logo').toggleClass('rotate360');
                }
            );
        </script>

        <img src="images/member-order-payaccount-hangtag.png" class="hang-tag img-fluid" alt="" />
        <img src="images/order-detail-previous-page.png" class="img-fluid previous-page" alt="" />
        <script>
            $('.member-order-detail-fade-in .previous-page').click(
                function() {

                    location.replace('/memberMyOrder.html');
                }
            );
        </script>

        <div class="container pay-account">
            <div class="title">訂單編號：<span></span></div>
            <div class="info">匯款完成後請提供以下資料已安排後續出貨事宜，謝謝您。</div>
            <div class="order-pay-account-hr"></div>
            <div class="sub-title">應付金額：<span></span>元</div>
            <div id="" class="sub-title">銀行代碼：<select></select>
            </div>
            <div class="sub-title">匯款帳號：<input class="" type="text" placeholder="" /></div>
            <div class="sub-title">匯款日期：<input class="" type="date" /></div>
            <button type="none" class="submit">確認送出</button>
        </div>

        <script>
            var testMeberOrderPayAccountRecrod = [{
                "OrderID": location.search.substr(location.search.indexOf('=') + 1),
                "Total": 3588,
                "Discount": "550",
                "Bank": "013",
                "Account": "95587251470025",
                "PayTime": "2018-07-10"
            }];

            var meberOrderPayAccountRecrod;
            $(function() {
                meberOrderPayAccountRecrod = testMeberOrderPayAccountRecrod;
                // $.post('<c:url value="/order/getOneOrder">', {
                //     "orderID": location.search.substr(location.search.indexOf('=') + 1)
                // }, function(data) {
                //     meberOrderPayAccountRecrod = data;
                // });
                loadPayAccount(meberOrderPayAccountRecrod);
            })


            // 動態生成Bank代碼
            function dynamicBankCode(selectedCode) {
                let bankCodeJson = [{
                    "code": "004",
                    "name": "臺灣銀行"
                }, {
                    "code": "005",
                    "name": "臺灣土地銀行"
                }, {
                    "code": "006",
                    "name": "合作金庫商業銀行"
                }, {
                    "code": "007",
                    "name": "第一商業銀行"
                }, {
                    "code": "008",
                    "name": "華南商業銀行"
                }, {
                    "code": "009",
                    "name": "彰化商業銀行"
                }, {
                    "code": "011",
                    "name": "上海商業儲蓄銀行"
                }, {
                    "code": "012",
                    "name": "台北富邦商業銀行"
                }, {
                    "code": "013",
                    "name": "國泰世華商業銀行"
                }, {
                    "code": "016",
                    "name": "高雄銀行"
                }, {
                    "code": "017",
                    "name": "兆豐國際商業銀行"
                }, {
                    "code": "021",
                    "name": "花旗(台灣)商業銀行"
                }, {
                    "code": "050",
                    "name": "臺灣中小企業銀行"
                }, {
                    "code": "052",
                    "name": "渣打國際商業銀行"
                }, {
                    "code": "053",
                    "name": "台中商業銀行"
                }, {
                    "code": "054",
                    "name": "京城商業銀行"
                }, {
                    "code": "101",
                    "name": "瑞興商業銀行"
                }, {
                    "code": "102",
                    "name": "華泰商業銀行"
                }, {
                    "code": "103",
                    "name": "臺灣新光商業銀行"
                }, {
                    "code": "108",
                    "name": "陽信商業銀行"
                }, {
                    "code": "114",
                    "name": "基隆第一信用合作社"
                }, {
                    "code": "115",
                    "name": "基隆市第二信用合作社"
                }, {
                    "code": "118",
                    "name": "板信商業銀行"
                }, {
                    "code": "119",
                    "name": "淡水第一信用合作社"
                }, {
                    "code": "130",
                    "name": "新竹第一信用合作社"
                }, {
                    "code": "132",
                    "name": "新竹第三信用合作社"
                }, {
                    "code": "146",
                    "name": "台中市第二信用合作社"
                }, {
                    "code": "147",
                    "name": "三信商業銀行"
                }, {
                    "code": "162",
                    "name": "彰化第六信用合作社"
                }, {
                    "code": "165",
                    "name": "彰化縣鹿港信用合作社"
                }, {
                    "code": "215",
                    "name": "花蓮第一信用合作社"
                }, {
                    "code": "216",
                    "name": "花蓮第二信用合作社"
                }, {
                    "code": "600",
                    "name": "財團法人全國農漁業及金融資訊中心"
                }, {
                    "code": "700",
                    "name": "中華郵政股份有限公司"
                }, {
                    "code": "803",
                    "name": "聯邦商業銀行"
                }, {
                    "code": "805",
                    "name": "遠東國際商業銀行"
                }, {
                    "code": "806",
                    "name": "元大商業銀行"
                }, {
                    "code": "807",
                    "name": "永豐商業銀行"
                }, {
                    "code": "808",
                    "name": "玉山商業銀行"
                }, {
                    "code": "809",
                    "name": "凱基商業銀行"
                }, {
                    "code": "812",
                    "name": "台新國際商業銀行"
                }, {
                    "code": "815",
                    "name": "日盛國際商業銀行"
                }, {
                    "code": "816",
                    "name": "安泰商業銀行"
                }, {
                    "code": "822",
                    "name": "中國信託商業銀行"
                }, {
                    "code": "910",
                    "name": "財團法人農漁會聯合資訊中心"
                }, {
                    "code": "928",
                    "name": "板橋區農會電腦共用中心"
                }, {
                    "code": "951",
                    "name": "新北市農會附設北區農會電腦共同利用中心"
                }, {
                    "code": "952",
                    "name": "財團法人農漁會南區資訊中心"
                }, {
                    "code": "997",
                    "name": "中華民國信用合作社聯合社南區聯合資訊處理中心"
                }];
                $('.container.pay-account .sub-title:nth-child(5) select').append(
                    function() {
                        let bankCodeArry = [];
                        $.each(bankCodeJson, function(i, v) {
                            bankCodeArry.push(
                                function() {
                                    if (selectedCode == v.code) {
                                        return $('<option></option>').text(v.code + v.name).prop('selected', true);
                                    } else {
                                        return $('<option></option>').text(v.code + v.name);
                                    }
                                }()
                            );
                        });
                        return bankCodeArry;
                    }()
                );
            };

            // 動態載入資料
            function loadPayAccount(jsonDataIn) {
                // 如果有資料時
                if (jsonDataIn != null) {
                    $('.container.pay-account .title span').text(jsonDataIn[0].OrderID);
                    $('.container.pay-account .sub-title:nth-child(4) span').text(jsonDataIn[0].Total);
                    // 如果有帳號紀錄時
                    if (typeof jsonDataIn[0].Account != "undefined") {
                        dynamicBankCode(jsonDataIn[0].Bank);
                        $('.container.pay-account .sub-title:nth-child(6) input').val(jsonDataIn[0].Account);
                        $('.container.pay-account .sub-title:nth-child(7) input').val(jsonDataIn[0].PayTime);
                    }
                    // 無帳號紀錄時
                    else {
                        dynamicBankCode(null);
                    }
                }
                // 無資料時
                else {

                }
            };

            $('.container.pay-account .submit').click(
                function() {
                    let payAccountRecord = {
                        "orderID": location.search.substr(location.search.indexOf('=') + 1),
                        "payAccount": $('.container.pay-account .sub-title:nth-child(6) input').val(),
                        "payTime": $('.container.pay-account .sub-title:nth-child(7) input').val()
                    };
                    // $.post('<c:url value="/order/updatePayAccount">', payAccountRecord, function(data) {
                    //     if (data[0].success == "更新成功") {
                    //         $('#payAccountNotice .title').html('確認匯款資料後，<br/>我們將盡快安排出貨，<br/>約需2-3個工作天到貨。');
                    //         $('#payAccountNotice').modal('show');
                    //     }
                    // });
                    console.log(payAccountRecord);
                    $('#payAccountNotice .title').html('確認匯款資料後，<br/>我們將盡快安排出貨，<br/>約需2-3個工作天到貨。');
                    $('#payAccountNotice').modal('show');
                }
            );
        </script>

        <!--半共用樣式區，Footer-->
        <footer class="member-common-footer">
            <div class="member-order-pay-account animation-1">
                <img src="images/profile-animation-1.png" class="img-fluid " alt=" " />
                <img src="images/profile-animation-2.png" class="img-fluid " alt=" " />
                <img src="images/member-myorder-detail-animation-3.png" class="img-fluid" alt="" />
                <img src="images/member-myorder-detail-animation-2.png" class="img-fluid" alt="" />
                <img src="images/member-myorder-detail-animation-4.png" class="img-fluid" alt="" />
                <img src="images/member-myorder-footer-bg.png " class="img-fluid " alt=" " />
                <div class="icon-link ">
                    <a href=" " class=" ">
                        <img src="images/icon-fb.png " class="img-fluid " alt=" " />
                    </a>
                    <a href=" " class=" ">
                        <img src="images/icon-ig.png " class="img-fluid " alt=" " />
                    </a>
                    <a href=" " class=" ">
                        <img src="images/icon-utube.png " class="img-fluid " alt=" " />
                    </a>
                </div>
                <div class="footer-title">
                    <div class="title ">會員訂單管理</div>
                    <div class="title ">我的訂單-訂單明細</div>
                </div>
                <div class="footer-link ">
                    <a href="news.html " class="wonderfulType nav-link ">
                        <div class="title ">最新消息</div>
                        <div class="title ">News</div>
                    </a>
                    <a href="productIndex.html " class="wonderfulType nav-link ">
                        <div class="title ">商品專區</div>
                        <div class="title ">Products</div>
                    </a>
                    <a href=" " class="wonderfulType nav-link ">
                        <div class="title ">相片底家</div>
                        <div class="title ">Photos</div>
                    </a>
                    <a href="story.html " class="wonderfulType nav-link ">
                        <div class="title ">美好故事</div>
                        <div class="title ">About&nbsp;Us</div>
                    </a>
                    <a href=" " class="wonderfulType nav-link ">
                        <div class="title ">美好問答</div>
                        <div class="title ">Q&A</div>
                    </a>
                    <a href="contact.html " class="wonderfulType nav-link ">
                        <div class="title ">找尋美好</div>
                        <div class="title ">Find&nbsp;Us</div>
                    </a>
                </div>
            </div>
        </footer>
        <script>
            $('.member-order-pay-account .footer-link .nav-link').hover(
                function() {
                    $(this).children('.title:last-child').css('opacity', "1 ");
                },
                function() {
                    $(this).children('.title:last-child').css('opacity', "0 ");
                }
            );
        </script>
    </div>

    <div id="payAccountNotice" class="ui modal">
        <div class="title"></div>
        <hr/>
        <button class="submit" type="none">關閉</button>
    </div>
    <script>
        $('#payAccountNotice .submit').click(
            function() {
                $('#payAccountNotice').modal('hide');
            }
        );
    </script>
</body>

</html>